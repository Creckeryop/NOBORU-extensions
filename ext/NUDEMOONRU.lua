local a=Parser:new("Nude-Moon","https://nude-moon.net","RUS","NUDEMOONRU","NUDEMOONRU")a.Filters={{Name="Жанр",Type="check",Tags={"Анал","Без цензуры","Беременные","Близняшки","Большие груди","В бассейне","В больнице","В ванной","В общественном месте","В первый раз","В транспорте","В туалете","Гарем","Гипноз","Горничные","Горячий источник","Групповой секс","Драма","Запредельное","Золотой дождь","Зрелые женщины","Идолы","Извращение","Измена","Имеют парня","Клизма","Колготки","Комиксы","Комиксы 3D","Косплей","Мастурбация","Мерзкий мужик","Много спермы","Молоко","Монстры","На камеру","На природе","Обычный секс","Огромный член","Пляж","Подглядывание","Принуждение","Продажность","Пьяные","Рабыни","Романтика","С ушками","Секс игрушки","Спящие","Страпон","Студенты","Суккуб","Тентакли","Толстушки","Трапы","Ужасы","Униформа","Учитель и ученик","Фемдом","Фетиш","Фурри","Футанари","Футфетиш","Фэнтези","Цветная","Чикан","Чулки","Шимейл","Эксгибиционизм","Юмор","Юри","Яой","Ahegao","BDSM","Ganguro","Gender bender","Megane","Mind break","Monstergirl","Netorare","Nipple penetration","Titsfuck","X-ray"}}}a.Keys={["Анал"]="анал",["Без цензуры"]="без цензуры",["Беременные"]="беременные",["Близняшки"]="близняшки",["Большие груди"]="большие груди",["В бассейне"]="в бассейне",["В больнице"]="в больнице",["В ванной"]="в ванной",["В общественном месте"]="в общественном месте",["В первый раз"]="в первый раз",["В транспорте"]="в транспорте",["В туалете"]="в туалете",["Гарем"]="гарем",["Гипноз"]="гипноз",["Горничные"]="горничные",["Горячий источник"]="горячий источник",["Групповой секс"]="групповой секс",["Драма"]="драма",["Запредельное"]="запредельное",["Золотой дождь"]="золотой дождь",["Зрелые женщины"]="зрелые женщины",["Идолы"]="идолы",["Извращение"]="извращение",["Измена"]="измена",["Имеют парня"]="имеют парня",["Клизма"]="клизма",["Колготки"]="колготки",["Комиксы"]="комиксы",["Комиксы 3D"]="комиксы 3D",["Косплей"]="косплей",["Мастурбация"]="мастурбация",["Мерзкий мужик"]="мерзкий мужик",["Много спермы"]="много спермы",["Молоко"]="молоко",["Монстры"]="монстры",["На камеру"]="на камеру",["На природе"]="на природе",["Обычный секс"]="обычный секс",["Огромный член"]="огромный член",["Пляж"]="пляж",["Подглядывание"]="подглядывание",["Принуждение"]="принуждение",["Продажность"]="продажность",["Пьяные"]="пьяные",["Рабыни"]="рабыни",["Романтика"]="романтика",["С ушками"]="с ушками",["Секс игрушки"]="секс игрушки",["Спящие"]="спящие",["Страпон"]="страпон",["Студенты"]="студенты",["Суккуб"]="суккуб",["Тентакли"]="тентакли",["Толстушки"]="толстушки",["Трапы"]="трапы",["Ужасы"]="ужасы",["Униформа"]="униформа",["Учитель и ученик"]="учитель и ученик",["Фемдом"]="фемдом",["Фетиш"]="фетиш",["Фурри"]="фурри",["Футанари"]="футанари",["Футфетиш"]="футфетиш",["Фэнтези"]="фэнтези",["Цветная"]="цветная",["Чикан"]="чикан",["Чулки"]="чулки",["Шимейл"]="шимейл",["Эксгибиционизм"]="эксгибиционизм",["Юмор"]="юмор",["Юри"]="юри",["Яой"]="яой",["Ahegao"]="ahegao",["BDSM"]="BDSM",["Ganguro"]="ganguro",["Gender bender"]="gender bender",["Megane"]="megane",["Mind break"]="mind break",["Monstergirl"]="monstergirl",["Netorare"]="netorare",["Nipple penetration"]="nipple penetration",["Titsfuck"]="titsfuck",["X-ray"]="x-ray"}a.NSFW=true;local b=Stringify;local function c(d)return DownloadContent({Link=d,Header1="referer: https://www.google.com/",Header2="cookie: fusion_user=323815.769acb94801026e2f219844529cf51d0"})end;local function e(table,f)for g,h in pairs(table)do if h==f then return true end end;return false end;function a:getManga(d,i,j)local k=c(d)i.NoPages=true;local l='<td colspan.-<a[^>]-href="(.-)".-title="(.-)".-src="(.-)"'if j then l=l..".-tag%-links(.-)</span>"end;for m,n,o,p in k:gmatch(l)do local q=true;if j then local r={}for s in p:gmatch("/tag/.->(.-)</a>")do r[#r+1]=AnsiToUtf8(s)end;for t,h in pairs(j[1])do if not e(r,self.Keys[h])then q=false;break end end end;if q then i[#i+1]=CreateManga(b(AnsiToUtf8(n)),m,o:find("^https")and o or self.Link..o,self.ID,self.Link..m)end;i.NoPages=false;if q then coroutine.yield(false)end end end;function a:getLatestManga(u,i)self:getManga(self.Link.."/all_manga?rowstart="..(u-1)*30,i)end;function a:getPopularManga(u,i)self:getManga(self.Link.."/all_manga?views&rowstart="..(u-1)*30,i)end;function a:searchManga(v,u,i,r)local w={}if v==""and r and#r>0 and#r[1]>0 then local x=""for t,h in pairs(r[1])do x=x..self.Keys[h]:gsub(" ","_"):gsub(".",function(y)return"%%"..string.format("%x",string.byte(y))end).."_"end;self:getManga(self.Link.."/tags/"..x.."&rowstart="..(u-1)*30,i)else for z in it_utf8(v)do if utf8ascii[z]then w[#w+1]=utf8ascii[z]else w[#w+1]=z end end;w=table.concat(w)self:getManga(self.Link.."/search?stext="..w.."&rowstart="..(u-1)*30,i,r)end end;function a:getChapters(A,i)local k=c(self.Link..A.Link)local d=k:match('"(/vse_glavy/[^"]-)"')if d then local B={}self:getManga(self.Link..d,B)for C=#B,1,-1 do local D=B[C]i[#i+1]={Name=b(D.Name),Link=D.Link:gsub("^(/%d*)","%1-online"),Pages={},Manga=A}end else i[#i+1]={Name=b(A.Name),Link=A.Link:gsub("^(/%d*)","%1-online"),Pages={},Manga=A}end end;function a:prepareChapter(E,i)local k=c(self.Link..E.Link.."?page=1")for d in k:gmatch("images%[%d-%].src = '(.-)';")do if d:find("^https")then i[#i+1]=d else i[#i+1]=self.Link..d end end end;function a:loadChapterPage(d,i)i.Link=d end;Extensions.Register("NUDEMOONRU",{Type="Parsers",Name="Nude-Moon",Link="https://nude-moon.net",Language="RUS",ID="NUDEMOONRU",Version=1,NSFW=true,Parsers={a},LatestChanges="Added Nude-Moon site as extension"})